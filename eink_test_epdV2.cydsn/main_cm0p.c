/* ========================================
 *
 * Copyright YOUR COMPANY, THE YEAR
 * All Rights Reserved
 * UNPUBLISHED, LICENSED SOFTWARE.
 *
 * CONFIDENTIAL AND PROPRIETARY INFORMATION
 * WHICH IS THE PROPERTY OF your company.
 *
 * Microcontroller: CY8CPROTO-063-BLE (CYBLE-416045-02)
 * Eink display: waveshare 7.5inch e-Paper V2 black/white 800 x 480
 * The code used in this project originates mostly from the waveshare example sketch for Arduino
 *
 * ========================================
 */
#include "project.h"

// Display resolution
#define EPD_WIDTH 800
#define EPD_HEIGHT 480

uint8_t IMAGE_DATA[3096] = {
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0XFF, 0XC0, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X01, 0XFF, 0XC0, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X01, 0XFF, 0XC0, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X01, 0XFF, 0XC0, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X01, 0XFF, 0XC0, 0X00, 0X00,
    0X00, 0X00, 0X01, 0XF8, 0X78, 0X0F, 0X00, 0X0F, 0XFF, 0XFF, 0XFF, 0XC0,
    0X00, 0X01, 0XF0, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X01, 0XFF, 0XC0, 0X00, 0X00, 0X00, 0X00, 0X01, 0XF8, 0X78, 0X0F,
    0X00, 0X0F, 0XFF, 0XFF, 0XFF, 0XC0, 0X00, 0X01, 0XF0, 0X00, 0X00, 0X1F,
    0XFF, 0XFF, 0XF0, 0X00, 0X00, 0X00, 0X00, 0X01, 0XF8, 0X3F, 0XFF, 0XFF,
    0XFF, 0XFC, 0X03, 0XF0, 0X78, 0X0F, 0X00, 0X0F, 0XFF, 0XFF, 0XFF, 0XC0,
    0X00, 0X01, 0XF0, 0X00, 0X00, 0X3F, 0XFF, 0XFF, 0XF8, 0X00, 0X00, 0X00,
    0X00, 0X01, 0XF8, 0X3F, 0XFF, 0XFF, 0XFF, 0XFC, 0X07, 0XEF, 0X7B, 0XCF,
    0X00, 0X0F, 0XFF, 0XFF, 0XFF, 0XC0, 0X00, 0X01, 0XF0, 0X00, 0X00, 0X3F,
    0XFF, 0XFF, 0XFC, 0X00, 0X00, 0X00, 0X00, 0X01, 0XF8, 0X3F, 0XFF, 0XFF,
    0XFF, 0XFC, 0X0F, 0XEF, 0X7B, 0XCF, 0X00, 0X00, 0X00, 0X7C, 0X00, 0X00,
    0X00, 0X03, 0XF0, 0X00, 0X00, 0X3F, 0XFF, 0XFF, 0XFE, 0X00, 0X00, 0X00,
    0X00, 0X01, 0XF8, 0X3F, 0XFF, 0XFF, 0XFF, 0XFC, 0X1F, 0XCF, 0X7B, 0XDF,
    0X00, 0X3F, 0XFF, 0XFF, 0XFF, 0XF0, 0X1F, 0XFF, 0XFF, 0XFF, 0X00, 0X3F,
    0XFF, 0XFF, 0XFC, 0X00, 0X00, 0X00, 0X00, 0X01, 0XF8, 0X3F, 0XFF, 0XFF,
    0XFF, 0XFC, 0X3F, 0X8F, 0X7B, 0XDF, 0X00, 0X3F, 0XFF, 0XFF, 0XFF, 0XF0,
    0X1F, 0XFF, 0XFF, 0XFF, 0X00, 0X1F, 0XFF, 0XFF, 0XF8, 0X00, 0X00, 0X00,
    0X00, 0X00, 0XFF, 0XFF, 0XFF, 0XFE, 0XFF, 0XFC, 0X3F, 0X0F, 0X7B, 0XDF,
    0XFE, 0X3F, 0XFF, 0XFF, 0XFF, 0XF0, 0X1F, 0XFF, 0XFF, 0XFF, 0X00, 0X00,
    0X00, 0X1F, 0XF0, 0X00, 0X00, 0X00, 0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XFC,
    0XFF, 0XFC, 0X1E, 0XFF, 0XFF, 0XFF, 0XFE, 0X3F, 0XFF, 0XFF, 0XFF, 0XF0,
    0X1F, 0XFF, 0XFF, 0XFF, 0X00, 0X00, 0X00, 0X7F, 0XC0, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XF8, 0XFF, 0XFC, 0X1D, 0XFF, 0XFF, 0XFF,
    0XFE, 0X3C, 0X00, 0X7C, 0X01, 0XF0, 0X1F, 0XFF, 0XFF, 0XFF, 0X00, 0X00,
    0X00, 0XFF, 0X80, 0X00, 0X00, 0X00, 0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XF0,
    0XFF, 0XFC, 0X09, 0XFF, 0XFF, 0XFF, 0XFE, 0X3D, 0XFE, 0X7F, 0XFF, 0XF0,
    0X1F, 0X01, 0XF0, 0X1F, 0X00, 0X00, 0X03, 0XFF, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XE0, 0XFF, 0XFC, 0X03, 0XFF, 0XFF, 0XFE,
    0XF8, 0X3D, 0XFE, 0X7F, 0XFF, 0XF0, 0X1F, 0X01, 0XF0, 0X1F, 0X00, 0X00,
    0X03, 0XFE, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XE0,
    0XFF, 0XFC, 0X03, 0XF0, 0X00, 0X7E, 0XF8, 0X3D, 0XFE, 0X7F, 0XFF, 0XF0,
    0X1F, 0X01, 0XF0, 0X1F, 0X00, 0X00, 0X03, 0XF0, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XE0, 0XFF, 0XFC, 0X07, 0XE0, 0X00, 0XFE,
    0XF8, 0X3C, 0X00, 0X7C, 0X01, 0XF0, 0X1F, 0XFF, 0XFF, 0XFF, 0X00, 0X00,
    0X03, 0XE0, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X0E, 0X0F, 0X0F, 0XC1,
    0XF1, 0XFC, 0X0F, 0XEF, 0XFF, 0XFE, 0XF8, 0X3D, 0XFE, 0X7F, 0XFF, 0XF0,
    0X1F, 0XFF, 0XFF, 0XFF, 0X00, 0X00, 0X03, 0XE0, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X0E, 0X0F, 0X07, 0XC3, 0XE0, 0XFC, 0X1F, 0XEF, 0XFF, 0XFE,
    0XF8, 0X3D, 0XFE, 0X7F, 0XFE, 0XF0, 0X1F, 0XFF, 0XFF, 0XFF, 0X00, 0X00,
    0X03, 0XE0, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X0E, 0X0F, 0X07, 0X83,
    0XE0, 0XFC, 0X3F, 0XEF, 0XFF, 0XFE, 0XF8, 0X01, 0XFE, 0X7F, 0XFE, 0X00,
    0X1F, 0XFF, 0XFF, 0XFF, 0X03, 0XFF, 0XFF, 0XFF, 0XFF, 0XC0, 0X00, 0X00,
    0X00, 0X00, 0X0F, 0X07, 0X07, 0X83, 0XC0, 0X7C, 0X3F, 0XEF, 0XFF, 0XFF,
    0XF8, 0X00, 0X00, 0X7C, 0X00, 0X00, 0X1F, 0X03, 0XF0, 0X1F, 0X03, 0XFF,
    0XFF, 0XFF, 0XFF, 0XC0, 0X00, 0X00, 0X00, 0X00, 0X0F, 0X07, 0X03, 0X87,
    0XC0, 0X7C, 0X3F, 0XE0, 0X00, 0X3F, 0XF8, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X1F, 0X01, 0XF0, 0X1F, 0X03, 0XFF, 0XFF, 0XFF, 0XFF, 0XC0, 0X00, 0X00,
    0X00, 0X00, 0X0F, 0X06, 0X03, 0X07, 0X80, 0X3C, 0X3F, 0XE3, 0XFF, 0X0F,
    0XF0, 0X00, 0X00, 0X00, 0X00, 0X00, 0X1F, 0X01, 0XF0, 0X1F, 0X03, 0XFF,
    0XFF, 0XFF, 0XFF, 0XC0, 0X00, 0X00, 0X00, 0X00, 0X0F, 0X00, 0X01, 0X0F,
    0X80, 0X3C, 0X1F, 0XE3, 0XFF, 0X0F, 0XF0, 0X07, 0XFF, 0XFF, 0XFF, 0X80,
    0X1F, 0XFF, 0XFF, 0XFF, 0X00, 0X00, 0X07, 0XE0, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X0F, 0X80, 0X00, 0X0F, 0X80, 0X3C, 0X19, 0XE3, 0XFF, 0X0F,
    0XF0, 0X07, 0XFF, 0XFF, 0XFF, 0X80, 0X1F, 0XFF, 0XFF, 0XFF, 0X00, 0X00,
    0X03, 0XE0, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X0F, 0X80, 0X60, 0X0F,
    0X04, 0X1C, 0X01, 0XE3, 0XFF, 0X0F, 0XE0, 0X07, 0XFF, 0XFF, 0XFF, 0X80,
    0X1F, 0XFF, 0XFF, 0XFF, 0X00, 0X00, 0X03, 0XE0, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X0F, 0X80, 0X60, 0X1E, 0X04, 0X1C, 0X01, 0XE3, 0XCF, 0X0F,
    0XE0, 0X03, 0XFF, 0XFF, 0XFF, 0X80, 0X1F, 0XFF, 0XFF, 0XFF, 0X00, 0X00,
    0X03, 0XE0, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X0F, 0XC0, 0X70, 0X1E,
    0X0E, 0X0C, 0X01, 0XE3, 0XCF, 0XF7, 0XE0, 0X00, 0X00, 0X00, 0X0F, 0X80,
    0X1F, 0XFF, 0XFF, 0XFF, 0X00, 0X00, 0X03, 0XE0, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X0F, 0XC0, 0XF0, 0X3C, 0X1F, 0X04, 0X01, 0XE3, 0XCF, 0XF7,
    0XC0, 0X03, 0XFF, 0XFF, 0XFF, 0X80, 0X1F, 0X01, 0XF0, 0X01, 0XC0, 0X00,
    0X03, 0XE0, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X0F, 0XE0, 0XF0, 0X78,
    0X1F, 0X0C, 0X01, 0XE7, 0XCF, 0XFF, 0XE0, 0X03, 0XFF, 0XFF, 0XFF, 0X80,
    0X1F, 0X01, 0XF0, 0X03, 0XF0, 0X00, 0X03, 0XE0, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X0F, 0XE0, 0XF0, 0X78, 0X3E, 0X0C, 0X01, 0XE7, 0XCF, 0XFF,
    0XF0, 0X03, 0XFF, 0XFF, 0XFF, 0X80, 0X1F, 0X01, 0XF0, 0X03, 0XF0, 0X00,
    0X03, 0XE0, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X0F, 0XE0, 0XF8, 0X78,
    0X3E, 0X1C, 0X01, 0XE7, 0XCF, 0XFF, 0XF0, 0X01, 0XFF, 0XFF, 0XFF, 0X80,
    0X00, 0X01, 0XF0, 0X03, 0XF0, 0X00, 0X03, 0XE0, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X0F, 0XF1, 0XF8, 0X78, 0X3C, 0X1C, 0X01, 0XEF, 0X8F, 0XBF,
    0XF8, 0X00, 0X00, 0X00, 0X0F, 0X80, 0X00, 0X01, 0XF0, 0X03, 0XE0, 0X00,
    0X03, 0XE0, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XFF,
    0XFC, 0X3C, 0X01, 0XEF, 0X8F, 0XFF, 0XFC, 0X07, 0XFF, 0XFF, 0XFF, 0X80,
    0X00, 0X01, 0XFF, 0XFF, 0XE0, 0X03, 0XFF, 0XE0, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XFF, 0XF0, 0X3C, 0X01, 0XFF, 0X8F, 0XFE,
    0XFF, 0X07, 0XFF, 0XFF, 0XFF, 0X80, 0X00, 0X01, 0XFF, 0XFF, 0XE0, 0X01,
    0XFF, 0XE0, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XFF,
    0XF0, 0X7C, 0X01, 0XFF, 0X01, 0XFC, 0X7E, 0X07, 0XFF, 0XFF, 0XFF, 0X80,
    0X00, 0X01, 0XFF, 0XFF, 0XC0, 0X01, 0XFF, 0XE0, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XFF, 0XF0, 0X7C, 0X01, 0XE7, 0X00, 0XF8,
    0X3C, 0X07, 0XFF, 0XFF, 0XFF, 0X80, 0X00, 0X00, 0XFF, 0XFF, 0XC0, 0X01,
    0XFF, 0XC0, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XFF,
    0XF0, 0X7C, 0X01, 0XE6, 0X00, 0XF0, 0X18, 0X00, 0X00, 0X00, 0X0F, 0X80,
    0X00, 0X00, 0X7F, 0XFF, 0X80, 0X01, 0XFF, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XFF, 0XF0, 0XFC, 0X01, 0XE0, 0X00, 0X60,
    0X00, 0X00, 0X00, 0X00, 0X0F, 0X80, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0XF0, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XFF,
    0XF1, 0XFC, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XFF, 0XF3, 0X83, 0XFF, 0XFF, 0XFF, 0XFF,
    0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF,
    0XFF, 0XFF, 0XFF, 0XFE, 0X00, 0X00, 0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XFF,
    0XF7, 0X83, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF,
    0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFE, 0X00, 0X00,
    0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XFF, 0XFF, 0X83, 0XFF, 0XFF, 0XFF, 0XFF,
    0XFF, 0XF8, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0X3F, 0XFF, 0XFF, 0XFF, 0XFF,
    0XFF, 0XFF, 0XFF, 0XFE, 0X00, 0X00, 0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XFF,
    0XFF, 0X83, 0XCE, 0X71, 0XFF, 0XFF, 0XFF, 0XF8, 0XFF, 0XFF, 0XFF, 0XFF,
    0X03, 0X3F, 0XFF, 0XFF, 0XFF, 0XFF, 0XFE, 0X3F, 0XFF, 0XFE, 0X00, 0X00,
    0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XFF, 0XFF, 0X83, 0XC6, 0X33, 0XFF, 0XFF,
    0XFF, 0XF8, 0XFF, 0XFF, 0XFF, 0XFF, 0X3F, 0X3F, 0XFF, 0XF3, 0XFF, 0XFF,
    0XFF, 0XFF, 0XFF, 0XFE, 0X00, 0X00, 0X00, 0X00, 0X0F, 0XFF, 0XFF, 0XFF,
    0XFF, 0XFF, 0XC6, 0X23, 0X8E, 0X79, 0X8F, 0X80, 0X1F, 0X1E, 0X1E, 0X3F,
    0X3F, 0X3C, 0X7C, 0X20, 0X83, 0X8E, 0X4F, 0X3C, 0X30, 0XFE, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0XFF, 0XC4, 0X23, 0X07, 0X33,
    0X07, 0X08, 0X0E, 0X0C, 0X18, 0X1F, 0X3F, 0X30, 0X38, 0X20, 0X82, 0X06,
    0X06, 0X30, 0X30, 0XFE, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0XFF, 0XE4, 0X03, 0X33, 0X32, 0X32, 0X78, 0XC6, 0X44, 0X39, 0X9F,
    0X07, 0X31, 0XB1, 0XF3, 0X8E, 0X66, 0X22, 0X31, 0XE7, 0XFE, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0XFF, 0XE0, 0X07, 0XC3, 0X02,
    0X03, 0X18, 0XC7, 0X84, 0X70, 0X1F, 0X3F, 0X30, 0X13, 0XF3, 0X9C, 0X62,
    0X62, 0X33, 0XE1, 0XFE, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0XFF, 0XE1, 0X87, 0X03, 0X06, 0X03, 0X88, 0XC6, 0X04, 0X70, 0X1F,
    0X3F, 0X30, 0X13, 0XF3, 0X9C, 0X62, 0X62, 0X33, 0XF0, 0XFE, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0XFF, 0XE1, 0X86, 0X33, 0X06,
    0X7F, 0XC0, 0XC4, 0X44, 0X71, 0XFF, 0X3F, 0X33, 0XF3, 0XF3, 0X9C, 0X62,
    0X62, 0X33, 0XFC, 0XFE, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0XFF, 0XE1, 0X8E, 0X23, 0X8F, 0X3F, 0XC8, 0XC4, 0X44, 0X78, 0XFF,
    0X3F, 0X31, 0XF9, 0XF1, 0X9E, 0X06, 0X62, 0X31, 0XFC, 0XFE, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0XFF, 0XF1, 0X8F, 0X03, 0X8F,
    0X86, 0X18, 0XC6, 0X04, 0X7C, 0X1F, 0X03, 0X3C, 0X3C, 0X30, 0X9F, 0X0E,
    0X62, 0X3C, 0X61, 0XFE, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF,
    0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFE, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF,
    0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF,
    0XFF, 0XFF, 0XFF, 0XFE, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF,
    0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFF, 0XFE, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
    0X00, 0X00, 0X00, 0X00, 0X00, 0X00,
};

uint8_t Voltage_Frame_7IN5_V2[] = {
    0x6, 0x3F, 0x3F, 0x11, 0x24, 0x7, 0x17,
};

uint8_t LUT_VCOM_7IN5_V2[] = {
    0x0, 0xF, 0xF, 0x0, 0x0, 0x1, 0x0, 0xF, 0x1, 0xF, 0x1, 0x2, 0x0, 0xF,
    0xF, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
};

uint8_t LUT_WW_7IN5_V2[] = {
    0x10, 0xF, 0xF, 0x0, 0x0, 0x1, 0x84, 0xF, 0x1, 0xF, 0x1, 0x2, 0x20, 0xF,
    0xF,  0x0, 0x0, 0x1, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0,
    0x0,  0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0,
};

uint8_t LUT_BW_7IN5_V2[] = {
    0x10, 0xF, 0xF, 0x0, 0x0, 0x1, 0x84, 0xF, 0x1, 0xF, 0x1, 0x2, 0x20, 0xF,
    0xF,  0x0, 0x0, 0x1, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0,
    0x0,  0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0,
};

uint8_t LUT_WB_7IN5_V2[] = {
    0x80, 0xF, 0xF, 0x0, 0x0, 0x1, 0x84, 0xF, 0x1, 0xF, 0x1, 0x2, 0x40, 0xF,
    0xF,  0x0, 0x0, 0x1, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0,
    0x0,  0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0,
};

uint8_t LUT_BB_7IN5_V2[] = {
    0x80, 0xF, 0xF, 0x0, 0x0, 0x1, 0x84, 0xF, 0x1, 0xF, 0x1, 0x2,
    0x40, 0xF, 0xF, 0x0, 0x0, 0x1, 0x0,  0x0, 0x0, 0x0, 0x0, 0x0,
    0x0,  0x0, 0x0, 0x0, 0x0, 0x0, 0x0,  0x0, 0x0, 0x0, 0x0, 0x0,
};

void eink_reset(void) {
    Cy_GPIO_Write(EINK_RST_PORT, EINK_RST_NUM, 1);
    CyDelay(20);
    Cy_GPIO_Write(EINK_RST_PORT, EINK_RST_NUM, 0);
    CyDelay(4);
    Cy_GPIO_Write(EINK_RST_PORT, EINK_RST_NUM, 1);
    CyDelay(20);
}

void eink_send_cmd(uint8_t command) {
    Cy_GPIO_Write(EINK_DC_PORT, EINK_DC_NUM, 0);
    uint8_t txbuffer[1] = {command};
    uint8_t rxbuffer[1] = {command};
    volatile uint32_t res = EINK_SPI_Transfer(&txbuffer, &rxbuffer, 1);
    /* Blocking wait for transfer completion */
    while (0UL != (CY_SCB_SPI_TRANSFER_ACTIVE & EINK_SPI_GetTransferStatus())) {
        // wait
    }
}

void eink_send_data(uint8_t data) {
    Cy_GPIO_Write(EINK_DC_PORT, EINK_DC_NUM, 1);
    uint8_t txbuffer[1] = {data};
    uint8_t rxbuffer[1];
    volatile uint32_t res = EINK_SPI_Transfer(&txbuffer, &rxbuffer, 1);
    /* Blocking wait for transfer completion */
    while (0UL != (CY_SCB_SPI_TRANSFER_ACTIVE & EINK_SPI_GetTransferStatus())) {
        // wait
    }
}

void eink_wait_until_idle(void) {
    while (1) {
        if (Cy_GPIO_Read(EINK_BUSY_PORT, EINK_BUSY_NUM) == 1)
            break;
    }
}

void eink_set_lut_by_host(uint8_t *lut_vcom, uint8_t *lut_ww, uint8_t *lut_bw,
                          uint8_t *lut_wb, uint8_t *lut_bb) {
    uint8_t count;
    eink_send_cmd(0x20); // VCOM
    for (count = 0; count < 42; count++)
        eink_send_data(lut_vcom[count]);

    eink_send_cmd(0x21); // LUTBW
    for (count = 0; count < 42; count++)
        eink_send_data(lut_ww[count]);

    eink_send_cmd(0x22); // LUTBW
    for (count = 0; count < 42; count++)
        eink_send_data(lut_bw[count]);

    eink_send_cmd(0x23); // LUTWB
    for (count = 0; count < 42; count++)
        eink_send_data(lut_wb[count]);

    eink_send_cmd(0x24); // LUTBB
    for (count = 0; count < 42; count++)
        eink_send_data(lut_bb[count]);
}

void eink_init(void) {
    // Arduino code
    EINK_SPI_Start();
    eink_reset();

    eink_send_cmd(0x01); // power setting
    
    eink_send_data(0x07);
    eink_send_data(0x17);  // 1-0=11: internal power
	eink_send_data(*(Voltage_Frame_7IN5_V2+6));  // VGH&VGL
	eink_send_data(*(Voltage_Frame_7IN5_V2+1));  // VSH
	eink_send_data(*(Voltage_Frame_7IN5_V2+2));  //  VSL
	eink_send_data(*(Voltage_Frame_7IN5_V2+3));  //  VSHR
    
    eink_send_cmd(0x82);  // VCOM DC Setting
	eink_send_data(*(Voltage_Frame_7IN5_V2+4));  // VCOM

    // Enhanced display drive
    eink_send_cmd(0x06); // Booster Soft Start
    eink_send_data(0x27);
    eink_send_data(0x27);
    eink_send_data(0x2F);
    eink_send_data(0x17);
    
    eink_send_cmd(0x30);   // OSC Setting
	eink_send_data(*(Voltage_Frame_7IN5_V2+0));  // 2-0=100: N=4  ; 5-3=111: M=7  ;  3C=50Hz     3A=100HZ

    eink_send_data(0x04); // POWER ON
    CyDelay(100);
    eink_wait_until_idle(); // waiting for the electronic paper IC to release
                            // the idle signal

    eink_send_cmd(0X00);  // PANNEL SETTING
    eink_send_data(0x3F); // KW-3f   KWR-2F	BWROTP 0f	BWOTP 1f

    eink_send_cmd(0x61);  // tres
    eink_send_data(0x03); // source 800
    eink_send_data(0x20);
    eink_send_data(0x01); // gate 480
    eink_send_data(0xE0);

    eink_send_cmd(0X15);
    eink_send_data(0x00);

    eink_send_cmd(0X50); // VCOM AND DATA INTERVAL SETTING
    eink_send_data(0x10);
    eink_send_data(0x00);

    eink_send_cmd(0X60); // TCON SETTING
    eink_send_data(0x22);
    
    eink_send_cmd(0x65);  // Resolution setting
    eink_send_data(0x00);
    eink_send_data(0x00);  //800*480
    eink_send_data(0x00);
    eink_send_data(0x00);
    
    eink_set_lut_by_host(LUT_VCOM_7IN5_V2, LUT_WW_7IN5_V2, LUT_BW_7IN5_V2,
                            LUT_WB_7IN5_V2, LUT_BB_7IN5_V2);
}

void eink_display_part(uint8_t *elem, uint32_t x_start, uint32_t y_start,
                       uint32_t elem_w, uint32_t elem_h) {
    eink_send_cmd(0x13);
    for (uint32_t j = 0; j < EPD_HEIGHT; j++) {
        for (uint32_t i = 0; i < EPD_WIDTH / 8; i++) {
            if ((j >= y_start) && (j < y_start + elem_h) &&
                (i * 8 >= x_start) && (i * 8 < x_start + elem_w)) {
                eink_send_data(
                    ~(elem[i - x_start / 8 + (elem_w) / 8 * (j - y_start)]));
            } else {
                eink_send_data(0x00);
            }
        }
    }
    eink_send_cmd(0x12);
    CyDelay(100);
    eink_wait_until_idle();
}

void eink_clear(void) {
    eink_send_cmd(0x13);
    for (uint32_t i = 0; i < EPD_HEIGHT * 6; i++) {
        eink_send_data(0xFF);
    }
    eink_send_cmd(0x12); // <-- eink not comming out of busy state
    CyDelay(200);
    eink_wait_until_idle();
}

int main(void) {
    __enable_irq(); /* Enable global interrupts. */
    /* Enable CM4.  CY_CORTEX_M4_APPL_ADDR must be updated if CM4 memory
     * layout is changed. */
    Cy_SysEnableCM4(CY_CORTEX_M4_APPL_ADDR);
    
    CyDelay(500); // Wait for 500 milliseconds

    /* Place your initialization/startup code here (e.g. MyInst_Start()) */
    Cy_GPIO_Write(EINK_PWR_PORT, EINK_PWR_NUM, 1);
    CyDelay(100);
    eink_init();
    CyDelay(1000);
    
    eink_display_part(IMAGE_DATA,250, 200,240,103);
    
    CyDelay(10000);
    
    eink_clear();
    
    CyDelay(1000);

    for (;;) {
        /* Place your application code here. */
    }
}

/* [] END OF FILE */
